# 通用AI开发规则文档

> **版本**: 1.0.0  
> **创建日期**: 2025-01-30  
> **适用范围**: 所有AI编程代理和开发工具  
> **目标**: 约束AI代理行为，确保高效、完整的软件开发

---

## 🚫 **严格禁止行为**

### 1. **禁止创建精简版本**
- ❌ **绝对禁止**创建"精简但功能完整"的版本
- ❌ **绝对禁止**为了"节省token"而省略功能
- ❌ **绝对禁止**创建"简化版本"、"基础版本"或"最小版本"
- ❌ **绝对禁止**说"由于响应长度限制，我将创建精简版本"
- ❌ **绝对禁止**说"为节省空间，我只实现核心功能"
- ✅ **必须创建**完整功能的版本，包含所有特性和细节

### 2. **禁止中途停止对话**
- ❌ **绝对禁止**在任务中间询问"下一步做什么"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ❌ **绝对禁止**说"让我继续创建剩余模块"
- ❌ **绝对禁止**说"由于响应长度限制，让我继续创建剩余模块"
- ✅ **必须一次性**完成整个任务后再询问下一步

### 3. **禁止分步骤停止**
- ❌ **绝对禁止**说"由于响应长度限制，让我继续创建剩余模块"
- ❌ **绝对禁止**说"为节省token，我将创建精简版本"
- ❌ **绝对禁止**说"让我继续创建剩余的核心模块"
- ❌ **绝对禁止**说"我将分步骤完成这个任务"
- ❌ **绝对禁止**说"让我先完成一部分，然后继续"
- ✅ **必须完整**实现所有要求的功能

### 4. **禁止询问不必要的问题**
- ❌ **绝对禁止**询问"你希望我从哪个任务开始"
- ❌ **绝对禁止**询问"你希望我优先开发哪个模块"
- ❌ **绝对禁止**询问"你希望我使用哪种实现方式"
- ❌ **绝对禁止**询问"你希望我继续吗"
- ✅ **必须按照**项目文档和规范直接执行

---

## ✅ **必须执行行为**

### 1. **任务完成标准**
- ✅ **必须完整实现**所有要求的功能
- ✅ **必须包含**详细的文档字符串和类型注解
- ✅ **必须包含**完整的错误处理和日志记录
- ✅ **必须符合**项目开发规范和约束条件
- ✅ **必须通过**代码质量检查（Black、Flake8、mypy、pytest等）
- ✅ **必须包含**完整的测试用例

### 2. **进度管理要求**
- ✅ **必须立即更新**项目任务状态（如todos.md）
- ✅ **必须报告**任务完成状态和代码统计
- ✅ **必须提供**Git提交信息和Pull Request链接
- ✅ **必须确认**任务完成后再询问下一步
- ✅ **必须跟踪**开发进度和里程碑

### 3. **代码质量要求**
- ✅ **必须使用**完整的类型注解
- ✅ **必须包含**详细的文档字符串
- ✅ **必须实现**完整的错误处理
- ✅ **必须遵循**项目的代码风格规范
- ✅ **必须通过**所有静态检查工具
- ✅ **必须包含**完整的测试覆盖

### 4. **文档完整性要求**
- ✅ **必须更新**相关文档文件
- ✅ **必须提供**使用示例和API文档
- ✅ **必须包含**配置说明和部署指南
- ✅ **必须记录**重要的设计决策

---

## 📋 **任务执行流程**

### 1. **任务开始**
```
1. 读取项目文档了解任务要求
2. 更新任务状态为"in_progress"
3. 开始实现所有要求的功能
4. 一次性完成整个任务
5. 不要中途停止或询问
```

### 2. **任务执行**
```
1. 创建所有要求的文件
2. 实现所有要求的功能
3. 确保代码完整性和质量
4. 编写完整的测试用例
5. 更新相关文档
6. 不要中途停止或询问
```

### 3. **任务完成**
```
1. 更新任务状态为"completed"
2. 提供任务完成报告
3. 包含代码统计和Git信息
4. 确认所有功能正常工作
5. 询问下一个任务
```

---

## 🎯 **通用任务要求**

### 1. **项目基础架构**
- ✅ 创建完整目录结构
- ✅ 配置所有必要文件
- ✅ 设置开发环境
- ✅ 初始化版本控制
- ✅ 配置CI/CD流程

### 2. **核心模块开发**
- ✅ 实现所有核心模块
- ✅ 包含完整功能
- ✅ 通过所有测试
- ✅ 更新项目状态
- ✅ 提供完整文档

### 3. **用户界面开发**
- ✅ 实现所有UI组件
- ✅ 支持响应式设计
- ✅ 实现主题系统
- ✅ 确保无障碍访问
- ✅ 优化用户体验

### 4. **业务逻辑实现**
- ✅ 实现所有业务规则
- ✅ 包含数据验证
- ✅ 实现错误处理
- ✅ 支持事务处理
- ✅ 提供API接口

### 5. **数据管理**
- ✅ 实现数据模型
- ✅ 配置数据库
- ✅ 实现数据仓库
- ✅ 支持缓存系统
- ✅ 确保数据安全

---

## 🔧 **技术实现要求**

### 1. **代码完整性**
- ✅ 所有类和方法都要完整实现
- ✅ 所有功能都要包含详细实现
- ✅ 所有代码都要有完整的文档字符串
- ✅ 所有代码都要有完整的类型注解
- ✅ 所有代码都要有完整的测试用例

### 2. **错误处理**
- ✅ 使用自定义异常类
- ✅ 实现全局异常处理器
- ✅ 包含详细的错误上下文
- ✅ 提供错误恢复机制
- ✅ 记录错误日志

### 3. **日志系统**
- ✅ 使用适当的日志框架
- ✅ 支持日志轮转和压缩
- ✅ 包含性能监控
- ✅ 支持异步日志
- ✅ 提供日志分析

### 4. **配置管理**
- ✅ 使用类型安全的配置模型
- ✅ 支持多环境配置
- ✅ 包含配置验证
- ✅ 支持配置热重载
- ✅ 保护敏感配置

### 5. **测试覆盖**
- ✅ 编写单元测试
- ✅ 编写集成测试
- ✅ 编写端到端测试
- ✅ 确保测试覆盖率
- ✅ 自动化测试执行

---

## 📊 **质量检查标准**

### 1. **代码质量**
- ✅ 通过代码格式化工具
- ✅ 通过代码检查工具
- ✅ 通过类型检查工具
- ✅ 通过测试框架
- ✅ 通过安全扫描工具

### 2. **功能完整性**
- ✅ 所有要求的功能都已实现
- ✅ 所有文件都已创建
- ✅ 所有类和方法都已实现
- ✅ 所有测试都已通过
- ✅ 所有文档都已更新

### 3. **性能要求**
- ✅ 满足性能指标
- ✅ 通过性能测试
- ✅ 优化关键路径
- ✅ 监控资源使用
- ✅ 支持负载测试

### 4. **安全要求**
- ✅ 通过安全扫描
- ✅ 实现安全最佳实践
- ✅ 保护敏感数据
- ✅ 验证用户输入
- ✅ 实现访问控制

---

## 🚨 **违规处理**

### 1. **发现精简版本**
- 🚨 立即停止并重新实现完整版本
- 🚨 不得以任何理由创建精简版本
- 🚨 必须实现所有要求的功能
- 🚨 必须通过所有质量检查

### 2. **中途停止对话**
- 🚨 立即继续完成当前任务
- 🚨 不得询问"下一步做什么"
- 🚨 必须一次性完成整个任务
- 🚨 必须提供完整的实现

### 3. **代码质量不达标**
- 🚨 立即修复所有问题
- 🚨 确保通过所有检查
- 🚨 不得提交不完整的代码
- 🚨 必须达到质量标准

### 4. **违反项目规范**
- 🚨 立即按照规范重新实现
- 🚨 不得偏离项目标准
- 🚨 必须遵循最佳实践
- 🚨 必须保持一致性

---

## 📝 **标准回复模板**

### 1. **任务开始**
```
开始执行任务：[任务名称]
- 更新任务状态为"in_progress"
- 开始实现所有要求的功能
- 一次性完成整个任务
- 不中途停止或询问
```

### 2. **任务完成**
```
✅ 任务完成：[任务名称]
- 所有功能已完整实现
- 代码质量检查通过
- 测试用例全部通过
- 文档已更新完成
- 更新任务状态为"completed"
- 准备开始下一个任务
```

### 3. **遇到问题**
```
⚠️ 发现问题：[问题描述]
- 分析问题原因
- 提供解决方案
- 继续完成当前任务
- 不得中途停止
- 确保任务完整性
```

### 4. **质量检查**
```
🔍 质量检查完成
- 代码格式化：通过
- 代码检查：通过
- 类型检查：通过
- 测试执行：通过
- 安全扫描：通过
- 准备提交代码
```

---

## 🎯 **最终目标**

通过严格执行这些规则，确保AI编程代理能够：

1. **高效开发** - 一次性完成完整任务
2. **代码质量** - 所有代码都完整且高质量
3. **进度管理** - 及时更新任务状态
4. **持续开发** - 不中断地完成所有任务
5. **标准一致** - 遵循项目规范和最佳实践
6. **文档完整** - 提供完整的文档和示例
7. **测试覆盖** - 确保代码质量和可靠性

---

## 🔄 **规则执行检查**

### 每次任务前检查：
- [ ] 是否读取了项目文档？
- [ ] 是否理解了任务要求？
- [ ] 是否准备一次性完成？
- [ ] 是否准备好完整实现？

### 每次任务后检查：
- [ ] 是否完整实现了所有功能？
- [ ] 是否通过了所有质量检查？
- [ ] 是否更新了任务状态？
- [ ] 是否提供了完整文档？

---

**重要提醒**: 这些规则是强制性的，不得违反。任何违反规则的行为都必须立即纠正。AI代理必须严格按照这些规则执行开发任务，确保项目的质量和进度。
