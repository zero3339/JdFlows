# Factory AI 开发规则文档

> **版本**: 1.0.0  
> **创建日期**: 2025-01-30  
> **适用范围**: JDFlows项目开发  
> **目标**: 约束Factory AI代理行为，确保高效开发

---

## 🚫 **严格禁止行为**

### 1. **禁止创建精简版本**
- ❌ **绝对禁止**创建"精简但功能完整"的版本
- ❌ **绝对禁止**为了"节省token"而省略功能
- ❌ **绝对禁止**创建"简化版本"或"基础版本"
- ✅ **必须创建**完整功能的版本，包含所有特性

### 2. **禁止中途停止对话**
- ❌ **绝对禁止**在任务中间询问"下一步做什么"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ❌ **绝对禁止**在任务中间询问"你希望我继续吗"
- ✅ **必须一次性**完成整个任务后再询问下一步

### 3. **禁止分步骤停止**
- ❌ **绝对禁止**说"由于响应长度限制，让我继续创建剩余模块"
- ❌ **绝对禁止**说"为节省token，我将创建精简版本"
- ❌ **绝对禁止**说"让我继续创建剩余的核心模块"
- ✅ **必须完整**实现所有要求的功能

---

## ✅ **必须执行行为**

### 1. **任务完成标准**
- ✅ **必须完整实现**所有要求的功能
- ✅ **必须包含**详细的文档字符串和类型注解
- ✅ **必须包含**完整的错误处理和日志记录
- ✅ **必须符合**项目开发规范和约束条件
- ✅ **必须通过**代码质量检查（Black、Flake8、mypy）

### 2. **进度管理要求**
- ✅ **必须立即更新**todos.md中对应任务的status
- ✅ **必须报告**任务完成状态和代码统计
- ✅ **必须提供**Git提交信息和Pull Request链接
- ✅ **必须确认**任务完成后再询问下一步

### 3. **代码质量要求**
- ✅ **必须使用**完整的类型注解
- ✅ **必须包含**详细的文档字符串
- ✅ **必须实现**完整的错误处理
- ✅ **必须遵循**项目的代码风格规范
- ✅ **必须通过**所有静态检查工具

---

## 📋 **任务执行流程**

### 1. **任务开始**
```
1. 读取todos.md了解任务要求
2. 更新任务状态为"in_progress"
3. 开始实现所有要求的功能
4. 一次性完成整个任务
```

### 2. **任务执行**
```
1. 创建所有要求的文件
2. 实现所有要求的功能
3. 确保代码完整性和质量
4. 不要中途停止或询问
```

### 3. **任务完成**
```
1. 更新todos.md状态为"completed"
2. 提供任务完成报告
3. 包含代码统计和Git信息
4. 询问下一个任务
```

---

## 🎯 **具体任务要求**

### 1. **项目基础架构搭建** (`project_setup`)
- ✅ 创建完整目录结构
- ✅ 配置所有必要文件
- ✅ 设置开发环境
- ✅ 初始化Git仓库

### 2. **核心模块开发** (`core_modules`)
- ✅ 实现所有核心模块
- ✅ 包含完整功能
- ✅ 通过所有测试
- ✅ 更新todos.md状态

### 3. **GUI基础架构** (`gui_foundation`)
- ✅ 实现主窗口类
- ✅ 实现样式管理器
- ✅ 实现主题系统
- ✅ 实现基础组件库

### 4. **自动化引擎开发** (`automation_engine`)
- ✅ 实现浏览器管理
- ✅ 实现反检测技术
- ✅ 实现数据提取器
- ✅ 实现任务调度器

### 5. **数据管理模块** (`data_management`)
- ✅ 实现数据库管理
- ✅ 实现数据模型
- ✅ 实现数据仓库
- ✅ 实现缓存系统

---

## 🔧 **技术实现要求**

### 1. **代码完整性**
- ✅ 所有类和方法都要完整实现
- ✅ 所有功能都要包含详细实现
- ✅ 所有代码都要有完整的文档字符串
- ✅ 所有代码都要有完整的类型注解

### 2. **错误处理**
- ✅ 使用自定义异常类
- ✅ 实现全局异常处理器
- ✅ 包含详细的错误上下文
- ✅ 提供错误恢复机制

### 3. **日志系统**
- ✅ 使用loguru日志系统
- ✅ 支持日志轮转和压缩
- ✅ 包含性能监控
- ✅ 支持异步日志

### 4. **配置管理**
- ✅ 使用Pydantic配置模型
- ✅ 支持多文件配置
- ✅ 包含配置验证
- ✅ 支持配置热重载

---

## 📊 **质量检查标准**

### 1. **代码质量**
- ✅ 通过Black代码格式化
- ✅ 通过Flake8代码检查
- ✅ 通过mypy类型检查
- ✅ 通过pytest测试

### 2. **功能完整性**
- ✅ 所有要求的功能都已实现
- ✅ 所有文件都已创建
- ✅ 所有类和方法都已实现
- ✅ 所有测试都已通过

### 3. **文档完整性**
- ✅ 所有代码都有文档字符串
- ✅ 所有类都有详细说明
- ✅ 所有方法都有参数说明
- ✅ 所有异常都有处理说明

---

## 🚨 **违规处理**

### 1. **发现精简版本**
- 🚨 立即停止并重新实现完整版本
- 🚨 不得以任何理由创建精简版本
- 🚨 必须实现所有要求的功能

### 2. **中途停止对话**
- 🚨 立即继续完成当前任务
- 🚨 不得询问"下一步做什么"
- 🚨 必须一次性完成整个任务

### 3. **代码质量不达标**
- 🚨 立即修复所有问题
- 🚨 确保通过所有检查
- 🚨 不得提交不完整的代码

---

## 📝 **标准回复模板**

### 1. **任务开始**
```
开始执行任务：[任务名称]
- 更新todos.md状态为"in_progress"
- 开始实现所有要求的功能
- 一次性完成整个任务
```

### 2. **任务完成**
```
✅ 任务完成：[任务名称]
- 所有功能已完整实现
- 代码质量检查通过
- 更新todos.md状态为"completed"
- 准备开始下一个任务
```

### 3. **遇到问题**
```
⚠️ 发现问题：[问题描述]
- 分析问题原因
- 提供解决方案
- 继续完成当前任务
- 不得中途停止
```

---

## 🎯 **最终目标**

通过严格执行这些规则，确保Factory AI代理能够：

1. **高效开发** - 一次性完成完整任务
2. **代码质量** - 所有代码都完整且高质量
3. **进度管理** - 及时更新任务状态
4. **持续开发** - 不中断地完成所有任务

---

**重要提醒**: 这些规则是强制性的，不得违反。任何违反规则的行为都必须立即纠正。
